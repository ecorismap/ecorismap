# TDD開発コマンド

テスト駆動開発（TDD）フローを実行します。

## 使用方法

```
/tdd [対象ファイルまたは機能名]
```

## 手順

### 1. 要件確認
- 実装する機能の明確化
- 該当するカバレッジ要件の確認
  - `src/modules/**`: 60%
  - `src/utils/**`: 40%
  - `src/hooks/**`: 30%

### 2. テスト作成（Red）
- 失敗するテストを先に書く
- テストファイルは`__tests__/`ディレクトリに配置
- 命名規則: `*.test.ts` または `*.test.tsx`

```typescript
describe('機能名', () => {
  it('正常ケース', () => {
    expect(actual).toBe(expected);
  });

  it('エッジケース', () => {
    // エッジケースのテスト
  });

  it('異常ケース', () => {
    expect(() => func(invalid)).toThrow();
  });
});
```

### 3. 実装（Green）
- テストが通る最小限の実装
- 過度な一般化を避ける

### 4. リファクタリング
- コード品質の改善
- 重複の除去
- 命名の改善

### 5. 検証
```bash
# テスト実行
yarn test

# カバレッジ確認
yarn test:coverage

# 型チェック
npx tsc --noEmit

# リント
yarn lint
```

## カバレッジ要件

| ディレクトリ | 最低カバレッジ |
|-------------|---------------|
| `src/modules/**` | 60% |
| `src/utils/**` | 40% |
| `src/hooks/**` | 30% |
| global | 20% |

## モックパターン

`jestSetupFile.js`に定義されたモックを活用：
- React Nativeモジュール
- Firebaseサービス
- Navigationモック
- プラットフォーム固有API

## 引数

`$ARGUMENTS`が指定された場合、その機能/ファイルに対してTDD開発を行う。

## 出力

1. 作成/更新したテストファイル
2. 実装したコード
3. カバレッジレポート（要件を満たしているか）
4. 型チェック結果

## 注意事項

- 非同期処理は必ず`await`で待機
- Firebaseテストはエミュレータ使用（`yarn testemu`）
- プラットフォーム固有の機能はモックを適切に設定
