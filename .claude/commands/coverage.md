# カバレッジレポートコマンド

テストカバレッジを測定し、要件との差分を分析します。

## 使用方法

```
/coverage [対象ディレクトリ]
```

## カバレッジ要件

| ディレクトリ | 最低カバレッジ |
|-------------|---------------|
| `src/modules/**` | 60% |
| `src/utils/**` | 40% |
| `src/hooks/**` | 30% |
| global | 20% |

## 実行手順

### 1. カバレッジ測定
```bash
yarn test:coverage
```

### 2. レポート分析
- 全体カバレッジの確認
- ディレクトリ別カバレッジの確認
- 要件との差分計算

### 3. 改善提案
- カバレッジ不足のファイル特定
- テスト追加の優先度付け

## 引数

`$ARGUMENTS`が指定された場合、そのディレクトリに絞ってカバレッジを分析。
指定なしの場合は、全体のカバレッジを分析。

## 出力形式

```markdown
## カバレッジレポート

### 全体サマリー
| 指標 | 現在値 | 要件 | 状態 |
|------|--------|------|------|
| Statements | XX% | 20% | ✓/✗ |
| Branches | XX% | 20% | ✓/✗ |
| Functions | XX% | 20% | ✓/✗ |
| Lines | XX% | 20% | ✓/✗ |

### ディレクトリ別

#### src/modules/ (要件: 60%)
| ファイル | Lines | 状態 |
|----------|-------|------|
| module1.ts | XX% | ✓/✗ |
| module2.ts | XX% | ✓/✗ |

#### src/utils/ (要件: 40%)
| ファイル | Lines | 状態 |
|----------|-------|------|

#### src/hooks/ (要件: 30%)
| ファイル | Lines | 状態 |
|----------|-------|------|

### カバレッジ不足ファイル

#### 優先度: 高
1. [ファイル1] - 現在: XX%, 不足: YY%
2. [ファイル2] - 現在: XX%, 不足: YY%

#### 優先度: 中
[ファイル一覧]

### 改善提案

#### [ファイル名]
```typescript
// テスト追加推奨箇所
- 関数: functionName
- 分岐: line XX
```

### 次のステップ
1. [優先度高のファイルにテスト追加]
2. [ブランチカバレッジの改善]
```

## カバレッジ改善のヒント

### ステートメントカバレッジ
- 各関数が呼び出されているか
- 各行が実行されているか

### ブランチカバレッジ
- if/else の両方の分岐
- switch の全ケース
- 三項演算子の両方

### 関数カバレッジ
- エクスポートされた関数
- コールバック関数
- イベントハンドラ

## 関連コマンド

- `/tdd` - TDD開発
- `/code-review` - コードレビュー
