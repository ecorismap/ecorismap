# E2Eテストコマンド

Playwright MCPを使用してE2Eテストを実行します。

## 使用方法

```
/e2e [テスト対象のフロー名]
```

## 前提条件

1. Web版が起動していること
   ```bash
   yarn web
   # http://localhost:19006 でアクセス可能
   ```

2. Playwright MCPが有効であること

## テスト対象

### auth（認証）
```
/e2e auth
```
- ログイン/ログアウトフロー
- アカウント作成
- パスワードリセット

### map（地図）
```
/e2e map
```
- 地図表示確認
- ズーム/パン操作
- マーカー操作

### data（データ操作）
```
/e2e data
```
- データ入力フォーム
- データ編集
- データ削除

### project（プロジェクト）
```
/e2e project
```
- プロジェクト作成
- メンバー招待
- データ同期

### all（全テスト）
```
/e2e all
```
- 全テストシナリオを実行

## 実行フロー

### 1. 環境確認
- Web版の起動確認
- Playwright MCP接続確認

### 2. テスト実行
- `mcp__playwright__browser_navigate`でページ移動
- `mcp__playwright__browser_snapshot`で状態確認
- `mcp__playwright__browser_click`で操作
- `mcp__playwright__browser_wait_for`で待機
- `mcp__playwright__browser_take_screenshot`で証跡

### 3. 結果報告
- テスト結果サマリー
- 失敗時のスクリーンショット
- エラー詳細と改善提案

## 引数

`$ARGUMENTS`が指定された場合、そのフローのE2Eテストを実行。
指定なしの場合は、全テストを実行。

## 出力形式

```markdown
## E2Eテスト結果

### テスト対象
[テストしたフロー/機能]

### 結果サマリー
- 成功: X件
- 失敗: Y件

### 詳細
[各テストの結果]

### スクリーンショット
[失敗時のスクリーンショットパス]

### 改善提案
[発見した問題と対応策]
```

## 注意事項

- テスト実行前にWeb版起動を確認
- 認証テストはテスト用アカウント使用
- ネットワーク依存テストは安定性に注意
- 長時間テストはタイムアウト調整が必要
