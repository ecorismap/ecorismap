# リファクタリングコマンド

リファクタリングエージェントを呼び出してコードを整理します。

## 使用方法

```
/refactor-clean [対象ファイルまたはディレクトリ]
```

## リファクタリング対象

### 1. コード品質改善
- 複雑な関数の分割
- 重複コードの共通化（DRY）
- 命名規則の改善
- マジックナンバーの定数化

### 2. デッドコード削除
- 未使用のimport
- 未使用の変数・関数
- コメントアウトされた古いコード
- 到達不能コード

### 3. TypeScript品質向上
- any型の具体化
- 型定義の整理
- 型ガードの適切な使用
- strictモード準拠

### 4. アーキテクチャ改善
- Atomic Designパターン準拠
- コンテナ/プレゼンテーショナル分離
- カスタムフックへのロジック抽出
- Context分割

## 手順

### 1. 現状分析
- 対象コードの問題点特定
- 影響範囲の確認

### 2. 計画策定
- 変更内容と影響範囲の明確化
- 既存テストの確認

### 3. 段階的変更
- 小さな変更を積み重ね
- 各段階で動作確認

### 4. 検証
```bash
npx tsc --noEmit  # 型チェック
yarn test         # テスト
yarn lint         # リント
```

## 引数

`$ARGUMENTS`が指定された場合、そのファイル/ディレクトリをリファクタリング。

## 出力形式

```markdown
## リファクタリング結果

### 対象
[対象ファイル/機能]

### 発見した問題
1. [問題1]
2. [問題2]

### 実施した変更

#### 変更1: [タイトル]
- 理由: [なぜ変更したか]
- 効果: [どう改善されたか]
- 変更前後:
```typescript
// Before
[変更前のコード]

// After
[変更後のコード]
```

### 検証結果
- [ ] 型チェック通過
- [ ] テスト通過
- [ ] リント通過

### 追加推奨
[さらなる改善提案]
```

## 遵守事項

- 機能を変更せず振る舞いを保持
- 一度に大きな変更を行わない
- プラットフォーム固有ファイルを考慮
- 既存のコーディング規約に従う

## 関連コマンド

- `/code-review` - コードレビュー
- `/tdd` - TDD開発
- `/commit` - コミット作成
